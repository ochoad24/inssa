(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{PI6J:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={cuiIsValid:function(t){window.console;if(!t)return!0;if(!/^[0-9]{4}\s?[0-9]{5}\s?[0-9]{4}$/.test(t))return!1;t=t.replace(/\s/,"");var e=parseInt(t.substring(9,11),10),a=parseInt(t.substring(11,13)),n=t.substring(0,8),s=parseInt(t.substring(8,9)),r=[17,8,16,16,13,14,19,8,24,21,9,30,32,21,8,17,14,5,11,11,7,17];if(0===e||0===a)return!1;if(e>r.length)return!1;if(a>r[e-1])return!1;for(var o=0,i=0;i<n.length;i++)o+=n[i]*(i+2);return o%11===s},nitIsValid:function(t){var e=t.toString();if(!e)return!0;if(!new RegExp("^[0-9]+(-?[0-9kK])?$").test(e))return!1;for(var a=(e=e.replace(/-/,"")).length-1,n=e.substring(0,a),s=e.substring(a,a+1).toLowerCase(),r=n.length+1,o=0,i=0;i<n.length;i++){var c=n.substring(i,i+1);o+=parseInt(c,10)*r,r-=1}var u=(11-o%11)%11;return s===(10==u?"k":u.toString())},money:function(t){return"Q "+t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},percentage:function(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+" %"},quantity:function(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},parseDecimal:function(t){return parseFloat(parseFloat(t).toFixed(2))},calculateCreditAmount:function(t,e,a){var n=this.parseDecimal(this.parseDecimal(t)/this.parseDecimal(a)),s=this.parseDecimal(this.parseDecimal(t)*(this.parseDecimal(e)/100));return this.parseDecimal(n+s)}}},v8TL:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={showItem:function(t){return void 0!==localStorage.getItem("permitKey")&&void 0!==JSON.parse(localStorage.getItem("permitKey")).find((function(e){return e.name===t&&1===e.status}))}}},wXer:function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),s=a.n(n),r=a("vDqi"),o=a.n(r),i=a("PI6J"),c=a("v8TL");function u(t,e,a,n,s,r,o){try{var i=t[r](o),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,s)}function v(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function o(t){u(r,n,s,o,i,"next",t)}function i(t){u(r,n,s,o,i,"throw",t)}o(void 0)}))}}var l,d,p={data:function(){return{loanPaymentId:0,loanPayments:[],pagination:{total:1,current:1}}},methods:{showItem:function(t){return c.a.showItem(t)},cancelPayment:function(t){this.loanPaymentId=t,this.$vs.dialog({acceptText:"Si",cancelText:"No",type:"confirm",color:"success",title:"Aprobar",text:"¿Desea anular este pago?.",accept:this.acceptCancelPayment})},acceptCancelPayment:function(){var t=this;t.$vs.loading(),o.a.delete("/api/loanPayment/".concat(t.loanPaymentId,"?user=").concat(JSON.parse(localStorage.getItem("userInfo")).uid)).then((function(e){t.$vs.loading.close(),t.getListLoans(),t.$vs.notify({title:"Listo",color:"success",position:"top-right",text:"".concat(e.data.message)})})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Error",color:"danger",position:"top-right",text:"".concat(e.response.data.message)})}))},print:function(t){this.$router.push({path:"/imprimir?id=".concat(t)})},convertDate:function(t){var e=t.split("-");if(e[2].includes(":")){var a=e[2].split(" ");e[2]=a[1]+" "+a[0]}return e[2]+"/"+e[1]+"/"+e[0]},mymoney:function(t){return i.a.money(parseFloat(t))},getListLoans:(d=v(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this).$vs.loading(),o.a.get("/api/loanPayment?loan=".concat(e.$route.query.id,"&page=").concat(e.pagination.current)).then((function(t){e.loanPayments=t.data.data,e.pagination.total=t.data.last_page,e.pagination.current=t.data.current_page,e.$vs.loading.close()})).catch((function(t){console.log(t),e.$vs.loading.close()}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),haveCashRegister:(l=v(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,o.a.get("/api/haveCashRegister/".concat(JSON.parse(localStorage.getItem("userInfo")).uid)).then((function(t){e.isHaveCashRegister=t.data.isHaveCashRegister,e.idCashRegister=t.data.idCashRegister})).catch((function(t){console.log(t)}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},mounted:function(){this.getListLoans()}},_=a("KHd+"),g=Object(_.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showItem("Ver lista de pagos")?a("div",[a("vx-card",{attrs:{title:"Listado de pagos"}},[a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("vs-table",{attrs:{data:t.loanPayments},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,(function(e){return a("vs-tr",{key:e.id},[a("vs-td",[t._v(t._s(e.id))]),t._v(" "),a("vs-td",[t._v(t._s(t.mymoney(e.expectedAmount)))]),t._v(" "),a("vs-td",[t._v(t._s(t.convertDate(e.expectedPaymentDate)))]),t._v(" "),a("vs-td",[t._v(t._s(t.mymoney(e.amount)))]),t._v(" "),a("vs-td",[t._v(t._s(t.mymoney(e.capital)))]),t._v(" "),a("vs-td",[t._v(t._s(t.mymoney(e.interest)))]),t._v(" "),a("vs-td",[t._v(t._s(t.mymoney(e.bankDefault)))]),t._v(" "),a("vs-td",[t._v(t._s("No diponible"===e.paymentDate?"No disponible":t.convertDate(e.paymentDate)))]),t._v(" "),a("vs-td",[a("div",{staticClass:"btn-group"},[0===e.status?a("vs-chip",{staticClass:"product-order-status",attrs:{color:"danger"}},[t._v("\n                  Anulado")]):t._e(),t._v(" "),1===e.status?a("vs-chip",{staticClass:"product-order-status",attrs:{color:"success"}},[t._v("\n                  Activo")]):t._e(),t._v(" "),2===e.status?a("vs-chip",{staticClass:"product-order-status",attrs:{color:"warning"}},[t._v("\n                  No cancelado")]):t._e()],1)]),t._v(" "),a("vs-td",[t._v(t._s(t.convertDate(e.created_at)))]),t._v(" "),a("vs-td",[t._v("\n              "+t._s(e.user_created.name)+"\n            ")]),t._v(" "),a("vs-td",[t._v("\n              "+t._s(e.user_updated.name)+"\n            ")]),t._v(" "),a("vs-td",[t._v("\n              "+t._s(e.user_duty_manager.name)+"\n            ")])],1)}))}}],null,!1,36812137)},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[t._v("ID")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"expectedAmount"}},[t._v("Monto sugerido")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"expectedPaymentDate"}},[t._v("Fecha sugerida")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"amount"}},[t._v("Monto")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"capital"}},[t._v("Capital")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"interest"}},[t._v("Interés")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"bankDefault"}},[t._v("Mora")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"paymentDate"}},[t._v("Fecha donde pagó")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"status"}},[t._v("Estado")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("Fecha de creación")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"user_created.name"}},[t._v("Usuario creador")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"user_updated.name"}},[t._v("Usuario actualizó")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"in_charge.name"}},[t._v("Encargado")])],1)],2)],1),t._v(" "),a("br"),t._v(" "),a("vs-pagination",{attrs:{total:t.pagination.total},on:{change:t.getListLoans},model:{value:t.pagination.current,callback:function(e){t.$set(t.pagination,"current",e)},expression:"pagination.current"}})],1)],1):t._e()}),[],!1,null,null,null);e.default=g.exports}}]);